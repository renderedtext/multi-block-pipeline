version: v1.0
name: Free topology pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Front-end test - phase 1
    dependencies: []
    task:
      jobs:
      - name: A job
        commands:
          - echo foo
          - sleep 30
  - name: Front-end test - phase 2
    dependencies: ["Front-end test - phase 1"]
    task:
      jobs:
      - name: A job
        commands:
          - echo foo
          - sleep 45
  - name: Back-end test - phase 1
    dependencies: []
    task:
      jobs:
      - name: A job
        commands:
          - echo foo
          - sleep 60
  - name: Back-end test - phase 2
    dependencies: ["Back-end test - phase 1"]
    task:
      jobs:
      - name: A job
        commands:
          - echo foo
